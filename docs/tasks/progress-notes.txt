# Code Review Fix Progress

Branch: fix/code-review-20260127-112543
Created: 2026-01-27 11:25
Main branch: major/pi-brain

## Issues to Fix

### P0 - Critical (system cannot build/start)

1. **Missing Daemon Entry Point** (1.1)
   - src/daemon/cli.ts:245 spawns `daemon-process.js` which doesn't exist
   - Need to create src/daemon/daemon-process.ts that initializes Scheduler, QueueManager, API Server

2. **Broken Build Script** (1.2)
   - package.json build script references `extensions/brain-query.ts`
   - Actual file is at `extensions/brain-query/index.ts`
   - Build will fail

### P1 - High (functionality broken)

3. **Hardcoded Mock Embedding Model** (1.3)
   - src/api/routes/query.ts:21 has `embeddingModel: "mock"`
   - Should use config value or a sensible default like "qwen/qwen3-embedding-8b"

4. **Config Propagation** (1.4)
   - src/api/server.ts only accepts ApiConfig in ServerContext
   - Routes like /query need DaemonConfig for query processing
   - Should extend ServerContext to include optional DaemonConfig

---
